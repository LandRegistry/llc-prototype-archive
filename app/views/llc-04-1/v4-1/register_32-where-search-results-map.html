{% extends "layout.html" %}

{% block page_title %}
Confirm address
{% endblock %}

{% block proposition_header %}
{% include "includes/propositional_navigation_lr_alpha.html" %}
{% endblock %}

{% block content %}

<main id="content" role="main" class="v4">
<div class="phase-banner">
        <p>
        <strong class="phase-tag">alpha</strong>
        <span>This is a new service</span>
        </p>
    </div>

  <div class="grid-row">
    <div class="column-two-thirds">
        <h1 class="heading-large">Check your location</h1>

        <!-- <label class="form-label" for="search_term">
        </label>
        <input class="form-control postcode_searched" id="search_term" name="search_term" type="text" value="{{ search_term }}">
        <a class="button search" href="#" role="button">Search</a><br><br> -->
        

        <p>The map shows the location you searched for.</p>
        <p>Check the map to make sure your charge will be registered to the correct location.</p>
        <p>You can use the map tools to show important information about your charge.</p>
        <p class="form-hint">For example, on a tree preservation order (TPO) use the circle button to show where the tree is located.</p>
        <h2 class="heading-small">I can't see my location</h2>
        <p>You can <a href="register_31-where-search">search again</a> using a postcode or UPRN.</p>
        <img id="imageToChange" src="/public/images/llc-03/address_1.png" style="width:960px;height:auto;">

        <div class="button-list">
            <div class="inline">
                <p>
                    <a id="targetToChange" class="button" href="register_6-description" role="button">Continue</a>
                </p> 
            </div>
        </div>


    </div>


</div>

</main>

<script>
    chargeType = sessionStorage.getItem("chargeType");
    chargeType = chargeType.toLowerCase();
    console.log(chargeType);
    postcode = sessionStorage.getItem("postcode");
    console.log(postcode);
    var postcodeArray = postcode.split("");
    var newArray = [];

    /* for (var i = 0; i < postcodeArray.length; i++) {
        var v = postcodeArray[i];
        v = Number(v);
        newArray.push(v);
    }

    var e = 0;
    while (e < newArray.length) {
        if(isNaN(newArray[e]) || newArray[e] == 0) {
            console.log("not a number");
            e++;
            document.getElementById("address_list").setAttribute("style", "display: none");
            document.getElementById("elementToHide").setAttribute("style", "display: none");
            document.getElementById("spanToHide").setAttribute("style", "display: none");
            document.getElementById("targetToChange").setAttribute("href", "register_32-where-search-results-confirm-city");
        } else {
            console.log("there is a number");
            if (newArray.length < 5) {
                document.getElementById("imageToChange").src="/public/images/llc-03/street.png";
                document.getElementById("targetToChange").setAttribute("href", "register_32-where-search-results-confirm-street");
            } else {
                document.getElementById("imageToChange").src="/public/images/llc-03/postcode.png";
                document.getElementById("address_list").setAttribute("style", "display: flex");
                document.getElementById("elementToHide").setAttribute("style", "display: block");
                document.getElementById("spanToHide").setAttribute("style", "display: inline");
                document.getElementById("targetToChange").setAttribute("href", "register_32-where-search-results-confirm");
            }
            break;
        }
    } */


    Array.prototype.slice.call(document.querySelectorAll(".post_code")).forEach(function(e){
        e.innerHTML = postcode;
    });
    
</script>

{% endblock %}
