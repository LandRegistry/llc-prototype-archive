{% extends "layout_map.html" %}

{% block page_title %}
Search for a charge
{% endblock %}

{% block content %}


<!-- alpha banner -->
<div class="phase-banner map-phase-banner">
  <p><strong class="phase-tag">BETA</strong></p>
</div>
<!-- main content starts -->
<div id="map" style="width: 100%">
  <!-- map goes in here -->
</div>
<div id="search-panel">
  <h1 class="heading-medium">Where do you want to add the chrge?</h1>
  <form action="/add_charge/v4-1/50" method="POST">
    <div class="form-group">
     <fieldset>
      <legend class="visuallyhidden">Where do you want to add the charge?</legend>
      <div class="form-group">

        <div class="form-group spacing-bottom-half">
          <input class="form-control search-field" id="search_term" name="search_term" type="text" value="" autofocus="autofocus">
          <!--<input class="search-button submit location-search" type="submit" value="Search"><br><br>-->
          <input class="button" type="submit" value="Search">
        </div>
        <ul id="address-list" class="list">
          <li><a href="/add_charge/v4-1/51?address=1 Clinton Street, Exeter {{ search_term }}">
            1 Clinton Street, Exeter {{ search_term }}
          </a></li>
          <li><a href="51?address=3 Clinton Street, Exeter {{ search_term }}">
            3 Clinton Street, Exeter {{ search_term }}
          </a></li>
          <li><a href="51?address=5 Clinton Street, Exeter {{ search_term }}">
            5 Clinton Street, Exeter {{ search_term }}
          </a></li>
          <li><a href="51?address=7 Clinton Street, Exeter {{ search_term }}">
            7 Clinton Street, Exeter {{ search_term }}
          </a></li>
          <li><a href="51?address=9 Clinton Street, Exeter {{ search_term }}">
            9 Clinton Street, Exeter {{ search_term }}
          </a></li>
          <li><a href="51?address=11 Clinton Street, Exeter {{ search_term }}">
            11 Clinton Street, Exeter {{ search_term }}
          </a></li>
          <li><a href="51?address=13 Clinton Street, Exeter {{ search_term }}">
            13 Clinton Street, Exeter {{ search_term }}
          </a></li>
          <li><a href="51?address=15 Clinton Street, Exeter {{ search_term }}">
            15 Clinton Street, Exeter {{ search_term }}
          </a></li>
          <li><a href="51?address=17 Clinton Street, Exeter {{ search_term }}">
            17 Clinton Street, Exeter {{ search_term }}
          </a></li>
          <li><a href="51?address=19 Clinton Street, Exeter {{ search_term }}">
            19 Clinton Street, Exeter {{ search_term }}
          </a></li>
          <li><a href="51?address=21 Clinton Street, Exeter {{ search_term }}">
            21 Clinton Street, Exeter {{ search_term }}
          </a></li>
          <li><a href="51?address=23 Clinton Street, Exeter {{ search_term }}">
            23 Clinton Street, Exeter {{ search_term }}
          </a></li>
          <li><a href="51?address=25 Clinton Street, Exeter {{ search_term }}">
            25 Clinton Street, Exeter {{ search_term }}
          </a></li>
          <li><a href="51?address=27 Clinton Street, Exeter {{ search_term }}">
            27 Clinton Street, Exeter {{ search_term }}
          </a></li>
          <li><a href="51?address=29 Clinton Street, Exeter {{ search_term }}">
            29 Clinton Street, Exeter {{ search_term }}
          </a></li>
          <li><a href="51?address=31 Clinton Street, Exeter {{ search_term }}">
            31 Clinton Street, Exeter {{ search_term }}
          </a></li>
        </ul>



      </div>
    </fieldset>
  </div>
</form>
</div>
<div class="panel-control close">
  <img src="{{ asset_path }}images/arrow_collapse.png">
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.0/jquery-ui.js"></script>
<script>
  $(document).ready(function() {
    var closePanel = function() {
      $("#search-panel").animate({
        "margin-left": "-1000px"
      }, 100);
      $(".panel-control").removeClass("close");
      $(".panel-control").addClass("open-button");
      $(".panel-control img").attr("src", "{{ asset_path }}images/arrow_open.png");
    }

    var openPanel = function() {
      $("#search-panel").animate({
        "margin-left": "0"
      }, 100);
      $(".panel-control").removeClass("open-button");
      $(".panel-control").addClass("close");
      $(".panel-control img").attr("src", "{{ asset_path }}images/arrow_collapse.png");
    }

    $(".panel-control").click(function() {
      if($(this).hasClass("close")) {
        closePanel();
      } else {
        openPanel();
      }
    });

    $("#map-search-button").click(function() {
      var searchedTerm = $("#maintain-map-search").val();
      sessionStorage.setItem("searchedTerm", searchedTerm);
    })
  });
</script>

{% endblock %}
{% block body_end_additional %}
{% include "includes/map_scripts.html" %}
<script src="/public/javascripts/map/search/llc_layer_styles.js"></script>
<script src="/public/javascripts/map/search/local_land_charges_layer.js"></script>
<script src="/public/javascripts/map/search/map_events.js"></script>
<script src="/public/javascripts/map/search/sample_data.js"></script>
<script src="/public/javascripts/map/search/search.js"></script>
<script>
  map.getControls().clear();
  zoomslider = new ol.control.Zoom();
  map.addControl(zoomslider);
  var geometry = "{{ geometry }}";
  MAP_HELPERS.zoom_map(geometry);
</script>
{% endblock %}