{% extends "layout.html" %} {% block page_title %} Address confirm {% endblock %} {% block content %}

<main id="content" role="main">
    <!-- alpha banner -->
    <div class="phase-banner-beta">
        <p>
            <strong class="phase-tag">BETA</strong>
            <span>This is a new service â€“ your <a href="../../feedback">feedback</a> will help us to improve it.</span>
        </p>
    </div>
    <!-- main content starts -->

    <div class="grid-row">
        <div class="column-two-thirds">
            <h1 class="heading-large">Location for this charge</h1>
            <p>You are adding a charge in <span class="bold-small" id="addressSelected">11 Okehampton Place </span><span class="bold-small">, Exeter, EX4 1AY</span>.</p>
            <details>

                <summary><span class="summary">Not the correct location?</span></summary>

                <div class="panel panel-border-narrow">

                    <div class="form-group" id="postcodeSearch">
                        <h2 class="heading-small">Enter a postcode</h2>
                        <input class="form-control search-field" id="search" name="search" type="text" autofocus="autofocus" value="">
                        <a id="findPostcode" class="button" href="#" role="button">Find</a>
                    </div>
                    <div class="form-group hiddenList" id="addressList">
                        <div class="results-block" id="address-list">
                            <p>Click on the place you need.</p>
                            <ol class="results-list">
                                <li><a href="#" class="address-list">2 Okehampton Place</a></li>
                                <li><a href="#" class="address-list">3 Okehampton Place</a></li>
                                <li><a href="#" class="address-list">4 Okehampton Place</a></li>
                                <li><a href="#" class="address-list">6 Okehampton Place</a></li>
                                <li><a href="#" class="address-list">8 Okehampton Place</a></li>
                                <li><a href="#" class="address-list">10 Okehampton Place</a></li>
                                <li><a href="#" class="address-list">12 Okehampton Place</a></li>
                                <li><a href="#" class="address-list">14 Okehampton Place</a></li>
                                <li><a href="#" class="address-list">16 Okehampton Place</a></li>
                                <li><a href="#" class="address-list">18 Okehampton Place</a></li>
                                <li><a href="#" class="address-list">20 Okehampton Place</a></li>
                            </ol>

                            <br>
                            <p>Can't find the place you need? <a href="search-property">Zoom to a place on the map</a></p>
                        </div>

                    </div>

                </div>

            </details>
            <br>
            <a class="button">Continue</a>
            <br><br>





            <div id="back ">
                <p><a href="# " class="back-link ">Back</a></p>
            </div>

        </div>


    </div>

</main>
<script>
    /*var locationIsChanging = sessionStorage.getItem('locationIsChanging');
                                                                                if (locationIsChanging === 'true') {
                                                                                    document.getElementById('confirmAddressButton').setAttribute('href', 'charge-summary');
                                                                                    sessionStorage.setItem('locationUpdated', 'true');
                                                                                }*/


    var addressLineOneToFill = sessionStorage.getItem('location');
    document.getElementById('addressSelected').textContent = addressLineOneToFill;

    document.getElementById('findPostcode').onclick = function() {
        document.getElementById('addressList').classList.remove('hiddenList');
        document.getElementById('manualAddressLink').classList.add('hiddenList');
        return false;
    };

    var addressList = document.querySelectorAll('.address-list');
    for (var i = 0; i < addressList.length; i++) {
        addressList[i].onclick = function() {
            var newAddress = this.textContent;
            document.getElementById('addressSelected').textContent = newAddress;
            document.getElementById('address-list').classList.add('hiddenList');
            return false;
        }
    }

    document.getElementById('confirmAddressButton').onclick = function() {
        var description = document.getElementById('description').value;
        sessionStorage.setItem('description', description);
    }

    var noAddressLabel = document.getElementById('noAddressLabel');
    noAddressLabel.onclick = function() {
        var addressFields = document.getElementsByClassName('addressField');
        if (this.classList.contains('selected')) {
            for (var i = 0; i < addressFields.length; i++) {
                addressFields[i].classList.add('hiddenList');
            }
        } else {
            for (var i = 0; i < addressFields.length; i++) {
                addressFields[i].classList.remove('hiddenList');
            }
        }
    }

    document.getElementById('confirmAddressButton').onclick = function() {
        if (noAddressLabel.classList.contains('selected')) {
            sessionStorage.setItem('noAddress', 'There is no address for this charge');
        }
    }

    document.getElementById('confirmAddressButton').onclick = function() {
        var addressLineOne = document.getElementById('addressLineOne').value;
        var addressLineTwo = document.getElementById('addressLineTwo').value;
        var addressLineThree = document.getElementById('addressLineThree').value;
        var town = document.getElementById('town').value;
        var county = document.getElementById('county').value;
        var postcode = document.getElementById('postcode').value;

        var newAddress = addressLineOne + ' ' + addressLineTwo + ' ' + addressLineThree + ' ' + town + ' ' + county + ' ' + postcode;

        sessionStorage.setItem('newAddress', newAddress);
    }

    document.getElementById('confirmAddressButton').onclick = function() {
        var locationDescription = document.getElementById('locationDescription').value;
        sessionStorage.setItem('locationDescription', locationDescription);
    }
</script>
{% endblock %}