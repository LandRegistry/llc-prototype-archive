{% extends "layout_citizen.html" %} {% block page_title %} Search for a charge {% endblock %} {% block content %}

<!--<style>
  .summary table, tr, td {
    border-bottom: 0px solid !important;

  }
</style> -->
<div class="map-page">
    <script>
        var maintainMapAddressSelected = sessionStorage.getItem("maintainMapAddress")
    </script>
    <!-- <main id="content" role="main"> -->
    <!-- beta banner -->
    <div class="phase-banner-beta">
        <p>
            <strong class="phase-tag">BETA</strong>
            <span>This is a new service â€“ your <a href="../../feedback">feedback</a> will help us to improve it.</span>
        </p>
    </div>
    <div class="container">
        <div id="openStreetMap" class="map">
            <!--<div class="controls">
                <div id="draw-controls" class="ol-control">
                    <button class="map-button polygon"></button>
                    <button class="map-button point"></button>
                    <button class="map-button line"></button>
                    <button class="map-button edit"></button>
                    <button class="map-button copy"></button>
                    <button class="map-button remove"></button>
                    <button class="map-button remove-all"></button>
                    <button class="map-button undo"></button>
                    <button id="snap-to-button"></button>
                </div>
            </div> -->
        </div>
    </div>
    <div id="search-panel" class="charge-list charge-list-maintain-v1-4 citizen-search-panel">
        <h1 class="heading-medium">You searched for <span id="searched_term"></span></h1>
        <div class="results-block">
            <h2 class="heading-small">Choose an address from the list</h2>
            <ol class="results-list address-list">
                <li class="bold-small"><a href="payment-benefits">2 Okehampton Place, Exeter</a></li>
                <li class="bold-small"><a href="payment-benefits">4 Okehampton Place, Exeter</a></li>
                <li class="bold-small"><a href="payment-benefits">6 Okehampton Place, Exeter</a></li>
                <li class="bold-small"><a href="payment-benefits">8 Okehampton Place, Exeter</a></li>
                <li class="bold-small"><a href="payment-benefits">10 Okehampton Place, Exeter</a></li>
                <li class="bold-small"><a href="payment-benefits">12 Okehampton Place, Exeter</a></li>
                <li class="bold-small"><a href="payment-benefits">14 Okehampton Place, Exeter</a></li>
                <li class="bold-small"><a href="payment-benefits">16 Okehampton Place, Exeter</a></li>
                <li class="bold-small"><a href="payment-benefits">18 Okehampton Place, Exeter</a></li>
                <li class="bold-small"><a href="payment-benefits">20 Okehampton Place, Exeter</a></li>
            </ol>
        </div>
    </div>
    <div class="panel-control close">
        <img src="{{ asset_path }}images/arrow_collapse.png">
    </div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.0/jquery-ui.js"></script>
<script>
    $(document).ready(function() {
        var closePanel = function() {
            $("#search-panel").animate({
                "margin-left": "-1000px"
            }, 100);
            $(".panel-control").removeClass("close");
            $(".panel-control").addClass("open-button");
            $(".panel-control img").attr("src", "{{ asset_path }}images/arrow_open.png");
        }

        var openPanel = function() {
            $("#search-panel").animate({
                "margin-left": "0"
            }, 100);
            $(".panel-control").removeClass("open-button");
            $(".panel-control").addClass("close");
            $(".panel-control img").attr("src", "{{ asset_path }}images/arrow_collapse.png");
        }

        $(".panel-control").click(function() {
            if ($(this).hasClass("close")) {
                closePanel();
            } else {
                openPanel();
            }
        });

        var searchTermRetrieved = sessionStorage.getItem("searchTerm");
        console.log(searchTermRetrieved);
        $("#searched_term").text(searchTermRetrieved);

        $('.address-list li').click(function() {
            var addressSelected = $(this).text();
            addressSelected = addressSelected + ' EX4 1AY';
            sessionStorage.setItem('searchTerm', addressSelected);
        })
    });
</script>

{% endblock %} {% block body_end_additional %}
<script src="/public/javascripts/map/search/search.js"></script>
<script>
    var map

    require([
        'esri/map',
        'esri/dijit/LocateButton',
        'dojo/domReady!'
    ], function(
        Map, LocateButton
    ) {
        map = new Map('openStreetMap', {
            center: [-3.539889, 50.718433],
            zoom: 18,
            basemap: 'streets'
        })

        geoLocate = new LocateButton({
            map: map
        }, 'LocateButton')
        geoLocate.startup()
    })
</script>
{% endblock %}