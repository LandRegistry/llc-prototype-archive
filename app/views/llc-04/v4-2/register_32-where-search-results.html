{% extends "layout.html" %}

{% block page_title %}
Confirm address
{% endblock %}

{% block proposition_header %}
{% include "includes/propositional_navigation.html" %}
{% endblock %}

{% block content %}

<main id="content" role="main" class="v4">

  <div class="grid-row">
    <div class="column-two-thirds">
        <h1 class="heading-large">Search results for <span class="post_code"></span></h1>

        <!-- <label class="form-label" for="search_term">
        </label>
        <input class="form-control postcode_searched" id="search_term" name="search_term" type="text" value="{{ search_term }}">
        <a class="button search" href="#" role="button">Search</a><br><br> -->
        

        <p>Draw the location of the charge on the map or adjust the highlighted section using map controls and press continue<span id="spanToHide">, <strong class="bold-small">or</strong> select the address from the options below</span>.</p>
        <img id="imageToChange" src="/public/images/llc-03/city.png" style="width:960px;height:395px;">

        <div class="button-list">
            <div class="inline">
                <p>
                    <a id="targetToChange" class="button" href="register_32-where-search-results-confirm" role="button">Continue</a>
                </p> 
            </div>
        </div>
        <p id="elementToHide" class="form-hint">Select an address from the options below</p>
        <div id="address_list">
            <div class="browse address_list">
                <ul class="list">
                    <li><a href="register_42-where-map-address">
                        1 Clinton Street, Exeter <span class="post_code"></span>
                    </a></li>
                    <li><a href="register_42-where-map-address">
                        3 Clinton Street, Exeter <span class="post_code"></span>
                    </a></li>
                    <li><a href="register_42-where-map-address">
                        5 Clinton Street, Exeter <span class="post_code"></span>
                    </a></li>
                    <li><a href="register_42-where-map-address">
                        7 Clinton Street, Exeter <span class="post_code"></span>
                    </a></li>
                    <li><a href="register_42-where-map-address">
                        9 Clinton Street, Exeter <span class="post_code"></span>
                    </a></li>
                    <li><a href="register_42-where-map-address">
                        11 Clinton Street, Exeter <span class="post_code"></span>
                    </a></li>
                    <li><a href="register_42-where-map-address">
                        13 Clinton Street, Exeter <span class="post_code"></span>
                    </a></li>
                    <li><a href="register_42-where-map-address">
                        15 Clinton Street, Exeter <span class="post_code"></span>
                    </a></li>
                    <li><a href="register_42-where-map-address">
                        17 Clinton Street, Exeter <span class="post_code"></span>
                    </a></li>
                    <li><a href="register_42-where-map-address">
                        19 Clinton Street, Exeter <span class="post_code"></span>
                    </a></li>
                    <li><a href="register_42-where-map-address">
                        21 Clinton Street, Exeter <span class="post_code"></span>
                    </a></li>
                    <li><a href="register_42-where-map-address">
                        23 Clinton Street, Exeter <span class="post_code"></span>
                    </a></li>
                    <li><a href="register_42-where-map-address">
                        25 Clinton Street, Exeter <span class="post_code"></span>
                    </a></li>
                    <li><a href="register_42-where-map-address">
                        27 Clinton Street, Exeter <span class="post_code"></span>
                    </a></li>
                    <li><a href="register_42-where-map-address">
                        29 Clinton Street, Exeter <span class="post_code"></span>
                    </a></li>
                    <li><a href="register_42-where-map-address">
                        31 Clinton Street, Exeter <span class="post_code"></span>
                    </a></li>
                </ul>
            </div>
        </div>


    </div>


</div>

</main>

<script>
    chargeType = sessionStorage.getItem("chargeType");
    chargeType = chargeType.toLowerCase();
    console.log(chargeType);
    postcode = sessionStorage.getItem("postcode");
    console.log(postcode);
    var postcodeArray = postcode.split("");
    var newArray = [];

    for (var i = 0; i < postcodeArray.length; i++) {
        var v = postcodeArray[i];
        v = Number(v);
        newArray.push(v);
    }

    var e = 0;
    while (e < newArray.length) {
        if(isNaN(newArray[e]) || newArray[e] == 0) {
            console.log("not a number");
            e++;
            document.getElementById("address_list").setAttribute("style", "display: none");
            document.getElementById("elementToHide").setAttribute("style", "display: none");
            document.getElementById("spanToHide").setAttribute("style", "display: none");
            document.getElementById("targetToChange").setAttribute("href", "register_32-where-search-results-confirm-city");
        } else {
            console.log("there is a number");
            if (newArray.length < 5) {
                document.getElementById("imageToChange").src="/public/images/llc-03/street.png";
                document.getElementById("targetToChange").setAttribute("href", "register_32-where-search-results-confirm-street");
            } else {
                document.getElementById("imageToChange").src="/public/images/llc-03/postcode.png";
                document.getElementById("address_list").setAttribute("style", "display: flex");
                document.getElementById("elementToHide").setAttribute("style", "display: block");
                document.getElementById("spanToHide").setAttribute("style", "display: inline");
                document.getElementById("targetToChange").setAttribute("href", "register_32-where-search-results-confirm");
            }
            break;
        }
    }


    Array.prototype.slice.call(document.querySelectorAll(".post_code")).forEach(function(e){
        e.innerHTML = postcode;
    });
    
</script>

{% endblock %}
